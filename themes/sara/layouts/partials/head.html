<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

{{ $title := .Title }}
{{ if .IsHome }}
  {{ $title = .Site.Title }}
{{ else }}
  {{ $title = printf "%s | %s" .Title .Site.Title }}
{{ end }}

<title>{{ $title }}</title>

<!-- SEO Meta Tags -->
{{ $description := .Params.description | default .Summary | default .Site.Params.description }}
<meta name="description" content="{{ $description }}">
<meta name="author" content="{{ .Params.author | default .Site.Params.author }}">

{{ with .Params.keywords }}
<meta name="keywords" content="{{ delimit . ", " }}">
{{ end }}

<!-- Canonical URL -->
{{ if .Params.canonical }}
<link rel="canonical" href="{{ .Params.canonical }}">
{{ else }}
<link rel="canonical" href="{{ .Permalink }}">
{{ end }}

<!-- Robots -->
{{ if .Params.noindex }}
<meta name="robots" content="noindex, nofollow">
{{ else }}
<meta name="robots" content="index, follow">
{{ end }}

<!-- Open Graph -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
{{ with .Params.image | default .Site.Params.image }}
<meta property="og:image" content="{{ . | absURL }}">
{{ end }}
{{ with .Params.imageAlt }}
<meta property="og:image:alt" content="{{ . }}">
{{ end }}

{{ if .IsPage }}
<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
{{ with .Params.tags }}
{{ range . }}
<meta property="article:tag" content="{{ . }}">
{{ end }}
{{ end }}
{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
{{ with .Site.Params.twitter }}
<meta name="twitter:site" content="{{ . }}">
<meta name="twitter:creator" content="{{ . }}">
{{ end }}
<meta name="twitter:title" content="{{ .Title }}">
<meta name="twitter:description" content="{{ $description }}">
{{ with .Params.image | default .Site.Params.image }}
<meta name="twitter:image" content="{{ . | absURL }}">
{{ end }}

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ if .IsPage }}Article{{ else }}WebSite{{ end }}",
  "name": "{{ .Title }}",
  "headline": "{{ .Title }}",
  {{ if .IsPage }}
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Params.author | default .Site.Params.author }}"
  },
  {{ end }}
  "description": "{{ $description }}",
  "url": "{{ .Permalink }}"
  {{ with .Params.image | default .Site.Params.image }}
  ,
  "image": "{{ . | absURL }}"
  {{ end }}
}
</script>

<!-- Favicon -->
<link rel="icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

{{- $mainCSS := resources.Get "css/main.css" -}}
{{- $syntaxCSS := resources.Get "css/syntax.css" -}}
{{- $css := slice $mainCSS $syntaxCSS | resources.Concat "css/bundle.css" | minify | fingerprint -}}
<link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">

<!-- Performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://fonts.googleapis.com">